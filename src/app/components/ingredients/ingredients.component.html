<main class="content-container">
  <div class="frame-4">
    <!-- Add New Ingredient Button -->
    <button class="frame-9" (click)="openAddNewIngredientModal()">
      <img class="btn-icon" src="assets/icons/add-ingredient.svg" alt="Add Ingredient Icon">
      <div class="btntext">Add New Ingredient</div>
    </button>

    <!-- Edit Added Ingredient Button -->
    <button class="frame-9" (click)="openEditExistIngredientsModal()">
      <img class="btn-icon" src="assets/icons/edit-ingredient.svg" alt="Edit Ingredient Icon">
      <div class="btntext">Edit Added Ingredient</div>
    </button>

    <!-- Search Input -->
    <div class="search-container">
      <div class="search-input-wrapper">
        <img class="search-icon" src="assets/icons/search-green.svg" alt="Search Icon">
        <input type="text" class="search-field" placeholder="Search" [(ngModel)]="searchTerm" (input)="performSearch()">
      </div>
    </div>

    <!-- Filter Button -->
    <div class="filter-dropdown-container" [class.active]="isFilterDropdownOpen">
      <button class="frame-9 filter-button" (click)="toggleFilterDropdown()">
        <img class="double-left1" src="assets/icons/filter.svg">
        <div class="btntext">Filter</div>
      </button>
      <div class="filter-dropdown-menu">
        <div class="filter-option" (click)="applyFilter('name')">Name</div>
        <div class="filter-option" (click)="applyFilter('type')">Ingredient Type</div>
        <div class="filter-option" (click)="applyFilter('proteins')">Proteins</div>
        <div class="filter-option" (click)="applyFilter('crudeFiber')">Crude Fiber</div>
        <div class="filter-option" (click)="applyFilter('tdn')">TDN</div>
        <div class="filter-option" (click)="applyFilter('me')">ME</div>
      </div>
    </div>

    <!-- Delete Ingredients Button -->
    <button class="frame-9 delete-btn" (click)="openDeleteIngredientModal()">
      <img class="btn-icon" src="assets/icons/delete.svg" alt="Delete Icon">
      <div class="btntext">Delete Ingredients</div>
    </button>
  </div>

  <!-- Ingredients Table -->
  <div class="table-container">
    <h3>Ingredients</h3>
    <div class="season-radio-group">
      <label class="raddiv">
        <input type="radio" class="radio" name="season" value="winter" [(ngModel)]="selectedSeason" (change)="applySeasonFilter()">
        <span>winter</span>
      </label>
      <label class="raddiv">
        <input type="radio" class="radio" name="season" value="summer" [(ngModel)]="selectedSeason" (change)="applySeasonFilter()">
        <span>summer</span>
      </label>
    </div>
    <table>
      <thead>
        <tr>
          <th><input type="checkbox"></th>
          <th>Season</th>
          <th>Name</th>
          <th>Type</th>
          <th>Proteins(CP)</th>
          <th>Crude fiber(CF)</th>
          <th>Total Digestible Nutrients(TDN)</th>
          <th>Digestible Energy(DE)</th>
        </tr>
      </thead>
      <tbody>
        <tr *ngFor="let ingredient of filteredIngredients">
          <td><input type="checkbox"></td>
          <td>{{ ingredient.season }}</td>
          <td>{{ ingredient.name }}</td>
          <td>{{ ingredient.type }}</td>
          <td>{{ ingredient.proteins }}</td>
          <td>{{ ingredient.crudeFiber }}</td>
          <td>{{ ingredient.tdn }}</td>
          <td>{{ ingredient.me }}</td>
        </tr>
      </tbody>
    </table>
  </div>

  <!-- Add New Ingredients Modal -->
  <div class="choose-update-milch" *ngIf="showAddNewIngredientModal">
    <div class="frame-4 modal add-edit-modal">
      <button class="close-btn" (click)="closeAllModals()"><img src="assets/icons/close.svg" alt="Close"></button>
      <div class="frame-5">
        <img class="modal-icon" src="assets/icons/add-ingredient-modal.svg" alt="Add Ingredient Icon">
        <div class="text-wrapper-5">Add New Ingredients</div>
      </div>
      <div class="frame-6">
        <div class="form-grid">
          <div class="form-group">
            <label class="text-wrapper-6">Name</label>
            <input type="text" class="data-filled" placeholder="Name" [(ngModel)]="selectedIngredient.name">
          </div>
          <div class="form-group">
            <label class="text-wrapper-6">Ingredient type</label>
            <select class="data-filled" [(ngModel)]="selectedIngredient.type">
              <option value="">Ingredient type</option>
              <option value="Forages">Forages</option>
              <option value="Concentrates">Concentrates</option>
              <option value="Proteins">Proteins</option>
              <option value="Roughages">Roughages</option>
              <option value="Mill By Product">Mill By Product</option>
              <option value="Crude Fiber">Crude Fiber</option>
            </select>
          </div>
          <div class="form-group">
            <label class="text-wrapper-6">Proteins</label>
            <input type="number" class="data-filled" placeholder="Proteins" [(ngModel)]="selectedIngredient.proteins">
          </div>
          <div class="form-group">
            <label class="text-wrapper-6">Crude Fiber</label>
            <input type="number" class="data-filled" placeholder="Crude Fiber" [(ngModel)]="selectedIngredient.crudeFiber">
          </div>
          <div class="form-group">
            <label class="text-wrapper-6">Total Digestible Nutrients(TDN)</label>
            <input type="number" class="data-filled" placeholder="Total Digestible nutrients" [(ngModel)]="selectedIngredient.tdn">
          </div>
          <div class="form-group">
            <label class="text-wrapper-6">Metabolizable Energy(ME)</label>
            <input type="number" class="data-filled" placeholder="Metabolizable energy" [(ngModel)]="selectedIngredient.me">
          </div>
        </div>
        <div class="frame-8">
          <button class="frame-9 modal-save-btn" (click)="submitNewIngredient()">
            <img class="btn-icon" src="assets/icons/save.svg" alt="Save Icon">
            <div class="btntext">Save Ingredient</div>
          </button>
        </div>
      </div>
    </div>
  </div>

  <!-- Edit Exist Ingredients Modal -->
  <div class="choose-update-milch" *ngIf="showEditExistIngredientsModal">
    <div class="frame-4 modal add-edit-modal">
      <button class="close-btn" (click)="closeAllModals()"><img src="assets/icons/close.svg" alt="Close"></button>
      <div class="frame-5">
        <img class="modal-icon" src="assets/icons/edit-ingredient-modal.svg" alt="Edit Ingredient Icon">
        <div class="text-wrapper-5">Edit Exist Ingredients</div>
      </div>
      <div class="frame-6">
        <div class="form-grid">
          <div class="form-group">
            <label class="text-wrapper-6">Name</label>
            <input type="text" class="data-filled" placeholder="Name" [(ngModel)]="selectedIngredient.name" (input)="showDataForIngredient()">
          </div>
          <div class="form-group">
            <label class="text-wrapper-6">Ingredient type</label>
            <select class="data-filled" [(ngModel)]="selectedIngredient.type">
              <option value="">Ingredient type</option>
              <option value="Forages">Forages</option>
              <option value="Concentrates">Concentrates</option>
              <option value="Proteins">Proteins</option>
              <option value="Roughages">Roughages</option>
              <option value="Mill By Product">Mill By Product</option>
              <option value="Crude Fiber">Crude Fiber</option>
            </select>
          </div>
          <div class="form-group">
            <label class="text-wrapper-6">Proteins</label>
            <input type="number" class="data-filled" placeholder="Proteins" [(ngModel)]="selectedIngredient.proteins">
          </div>
          <div class="form-group">
            <label class="text-wrapper-6">Crude Fiber</label>
            <input type="number" class="data-filled" placeholder="Crude Fiber" [(ngModel)]="selectedIngredient.crudeFiber">
          </div>
          <div class="form-group">
            <label class="text-wrapper-6">Total Digestible Nutrients(TDN)</label>
            <input type="number" class="data-filled" placeholder="Total Digestible nutrients" [(ngModel)]="selectedIngredient.tdn">
          </div>
          <div class="form-group">
            <label class="text-wrapper-6">Metabolizable Energy(ME)</label>
            <input type="number" class="data-filled" placeholder="Metabolizable energy" [(ngModel)]="selectedIngredient.me">
          </div>
        </div>
        <div class="frame-8">
          <button class="frame-9 modal-save-btn" (click)="submitUpdateIngredient()">
            <img class="btn-icon" src="assets/icons/save.svg" alt="Save Icon">
            <div class="btntext">Save Updates</div>
          </button>
        </div>
      </div>
    </div>
  </div>

  <!-- Delete Ingredient Modal -->
  <div class="choose-update-milch" *ngIf="showDeleteIngredientModal">
    <div class="frame-4 modal delete-modal">
      <button class="close-btn" (click)="closeAllModals()"><img src="assets/icons/close.svg" alt="Close"></button>
      <div class="delete-content">
        <img class="delete-icon" src="assets/icons/delete-ingredient-modal.svg" alt="Delete Ingredient Icon">
        <div class="delete-text">Delete Ingredient?</div>
        <div class="delete-buttons">
          <button class="delete-cancel-btn" (click)="closeAllModals()">Cancel</button>
          <button class="delete-confirm-btn" (click)="confirmDeleteIngredient()">Delete</button>
        </div>
      </div>
    </div>
  </div>
</main>
